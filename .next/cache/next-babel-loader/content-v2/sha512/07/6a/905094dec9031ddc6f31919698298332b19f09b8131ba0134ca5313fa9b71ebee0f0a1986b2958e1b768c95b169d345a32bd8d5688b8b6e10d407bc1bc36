{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { getStepsModalCurrentStep } from '../../../store/ui/selectors';\nimport { BaseStepModal } from './base_step_modal';\nimport { initBalances, setPaymasterTarget } from '../../../store/actions';\nimport { getWeb3Wrapper } from '../../../services/web3_wrapper';\n\nclass SetTargetStep extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"render\", () => {\n      const {\n        buildStepsProgress,\n        step\n      } = this.props;\n      const title = `Set Target Contract`;\n      const confirmCaption = `Confirm on Metamask Send Transaction`;\n      const loadingCaption = \"Sending Transaction\";\n      const doneCaption = \"Transaction Mined\";\n      const errorCaption = `Failed to Send Transaction`;\n      const loadingFooterCaption = `Waiting for confirmation...`;\n      const doneFooterCaption = `Sent`;\n      return /*#__PURE__*/_jsx(BaseStepModal, {\n        step: step,\n        title: title,\n        confirmCaption: confirmCaption,\n        loadingCaption: loadingCaption,\n        doneCaption: doneCaption,\n        errorCaption: errorCaption,\n        loadingFooterCaption: loadingFooterCaption,\n        doneFooterCaption: doneFooterCaption,\n        buildStepsProgress: buildStepsProgress,\n        estimatedTxTimeMs: 30000,\n        runAction: this._runAction,\n        showPartialProgress: true\n      });\n    });\n\n    _defineProperty(this, \"_runAction\", async ({\n      onLoading,\n      onDone,\n      onError\n    }) => {\n      const {\n        step,\n        onSend,\n        initBalances\n      } = this.props;\n      const web3Wrapper = await getWeb3Wrapper();\n\n      try {\n        const contractTransaction = await onSend(step.address);\n        onLoading();\n        const contractReceipt = await contractTransaction.wait();\n        await web3Wrapper.waitForTransaction(contractReceipt.transactionHash);\n        initBalances();\n        onDone();\n      } catch (e) {\n        console.log(e);\n        onError(e);\n      }\n    });\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    step: getStepsModalCurrentStep(state)\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onSend: amount => dispatch(setPaymasterTarget(amount)),\n    initBalances: () => dispatch(initBalances())\n  };\n};\n\nconst SetTargetStepContainer = connect(mapStateToProps, mapDispatchToProps)(SetTargetStep);\nexport { SetTargetStep, SetTargetStepContainer };","map":null,"metadata":{},"sourceType":"module"}