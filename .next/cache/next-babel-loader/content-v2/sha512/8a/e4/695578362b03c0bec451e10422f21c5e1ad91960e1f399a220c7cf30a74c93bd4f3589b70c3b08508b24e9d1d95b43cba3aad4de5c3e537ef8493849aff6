{"ast":null,"code":"import _regeneratorRuntime from \"/Users/danildovgal/Desktop/protocol_zero/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/danildovgal/Desktop/protocol_zero/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Contract, ethers, Signer } from \"ethers\";\nexport function getContract(_x, _x2, _x3) {\n  return _getContract.apply(this, arguments);\n}\n\nfunction _getContract() {\n  _getContract = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(address, abi, addressOrIndexOrSigner) {\n    var signer, provider;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(addressOrIndexOrSigner !== undefined)) {\n              _context.next = 12;\n              break;\n            }\n\n            if ([\"string\", \"number\"].includes(typeof addressOrIndexOrSigner)) {\n              _context.next = 5;\n              break;\n            }\n\n            signer = addressOrIndexOrSigner;\n            _context.next = 9;\n            break;\n\n          case 5:\n            if (!(signer instanceof Signer)) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 8;\n            return getSigner(addressOrIndexOrSigner);\n\n          case 8:\n            signer = _context.sent;\n\n          case 9:\n            return _context.abrupt(\"return\", new Contract(address, abi, signer));\n\n          case 12:\n            provider = getProvider();\n            return _context.abrupt(\"return\", new Contract(address, abi, provider));\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getContract.apply(this, arguments);\n}\n\nexport function getSigner(_x4) {\n  return _getSigner.apply(this, arguments);\n}\n\nfunction _getSigner() {\n  _getSigner = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(addressOrIndex) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", getProvider().getSigner(addressOrIndex));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getSigner.apply(this, arguments);\n}\n\nexport function getProvider(web3Provider) {\n  // return new ethers.providers.Web3Provider(ganache.provider())\n  if (web3Provider) {\n    return new ethers.providers.Web3Provider(web3Provider);\n  } else {\n    return new ethers.providers.JsonRpcProvider();\n  }\n}","map":{"version":3,"sources":["/Users/danildovgal/Desktop/protocol_zero/src/services/contract_loader.tsx"],"names":["Contract","ethers","Signer","getContract","address","abi","addressOrIndexOrSigner","undefined","includes","signer","getSigner","provider","getProvider","addressOrIndex","web3Provider","providers","Web3Provider","JsonRpcProvider"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,MAAnB,EAA2BC,MAA3B,QAAyC,QAAzC;AAEA,gBAAsBC,WAAtB;AAAA;AAAA;;;0EAAO,iBACHC,OADG,EAEHC,GAFG,EAGHC,sBAHG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMCA,sBAAsB,KAAKC,SAN5B;AAAA;AAAA;AAAA;;AAAA,gBAOM,CAAC,QAAD,EAAW,QAAX,EAAqBC,QAArB,CAA8B,OAAOF,sBAArC,CAPN;AAAA;AAAA;AAAA;;AAQKG,YAAAA,MAAM,GAAGH,sBAAT;AARL;AAAA;;AAAA;AAAA,kBASYG,MAAM,YAAYP,MAT9B;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAUoBQ,SAAS,CAACJ,sBAAD,CAV7B;;AAAA;AAUKG,YAAAA,MAVL;;AAAA;AAAA,6CAYQ,IAAIT,QAAJ,CAAaI,OAAb,EAAsBC,GAAtB,EAA2BI,MAA3B,CAZR;;AAAA;AAcOE,YAAAA,QAdP,GAckBC,WAAW,EAd7B;AAAA,6CAeQ,IAAIZ,QAAJ,CAAaI,OAAb,EAAsBC,GAAtB,EAA2BM,QAA3B,CAfR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAmBP,gBAAsBD,SAAtB;AAAA;AAAA;;;wEAAO,kBAAyBG,cAAzB;AAAA;AAAA;AAAA;AAAA;AAAA,8CACKD,WAAW,EAAZ,CAAgBF,SAAhB,CAA0BG,cAA1B,CADJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAIP,OAAO,SAASD,WAAT,CAAqBE,YAArB,EAAyG;AAC5G;AACA,MAAIA,YAAJ,EAAkB;AACd,WAAO,IAAIb,MAAM,CAACc,SAAP,CAAiBC,YAArB,CAAkCF,YAAlC,CAAP;AACH,GAFD,MAEO;AACH,WAAO,IAAIb,MAAM,CAACc,SAAP,CAAiBE,eAArB,EAAP;AACH;AACJ","sourcesContent":["import { Contract, ethers, Signer } from \"ethers\";\n\nexport async function getContract <T extends Contract>(\n    address: string,\n    abi: any,\n    addressOrIndexOrSigner?: string | number | Signer,\n): Promise<T> {\n    let signer: Signer\n    if (addressOrIndexOrSigner !== undefined) {\n        if (![\"string\", \"number\"].includes(typeof(addressOrIndexOrSigner))) {\n            signer = addressOrIndexOrSigner as unknown as Signer\n        } else if (signer instanceof Signer) {\n            signer = await getSigner(addressOrIndexOrSigner as string | number)\n        }\n        return new Contract(address, abi, signer) as T\n    } else {\n        const provider = getProvider();\n        return new Contract(address, abi, provider) as T\n    }\n}\n\nexport async function getSigner(addressOrIndex?: string | number) {\n    return (getProvider()).getSigner(addressOrIndex)\n}\n\nexport function getProvider(web3Provider?: ethers.providers.ExternalProvider): ethers.providers.JsonRpcProvider {\n    // return new ethers.providers.Web3Provider(ganache.provider())\n    if (web3Provider) {\n        return new ethers.providers.Web3Provider(web3Provider)\n    } else {\n        return new ethers.providers.JsonRpcProvider();\n    }    \n}"]},"metadata":{},"sourceType":"module"}